<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCCC 戰術戰傷救護數位手冊</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
            font-family: "Noto Sans TC", sans-serif;
        }
        .scollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const Icons = {
            Shield: () => <i data-lucide="shield" className="w-5 h-5"></i>,
            Activity: () => <i data-lucide="activity" className="w-5 h-5"></i>,
            Radio: () => <i data-lucide="radio" className="w-5 h-5"></i>,
            AlertCircle: () => <i data-lucide="alert-circle" className="w-5 h-5"></i>,
            CheckCircle: () => <i data-lucide="check-circle" className="w-5 h-5"></i>,
            FileText: () => <i data-lucide="file-text" className="w-5 h-5"></i>,
            Menu: () => <i data-lucide="menu" className="w-5 h-5"></i>,
            HeartPulse: () => <i data-lucide="heart-pulse" className="w-5 h-5"></i>,
            Cross: () => <i data-lucide="plus-circle" className="w-5 h-5"></i>,
            ArrowRight: () => <i data-lucide="arrow-right" className="w-5 h-5"></i>
        };

        // Component: Lucide Icon Wrapper
        const Icon = ({ name, className }) => {
            useEffect(() => {
                lucide.createIcons();
            }, []);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('CUF');
            
            useEffect(() => {
                lucide.createIcons();
            }, [activeTab]);

            const tabs = [
                { id: 'CUF', label: '敵火下 (CUF)', icon: 'shield-alert' },
                { id: 'TFC', label: '戰術區 (TFC)', icon: 'activity' },
                { id: 'EVAC', label: '後送 (TACEVAC)', icon: 'ambulance' },
                { id: 'TOOLS', label: '輔助工具', icon: 'wrench' }
            ];

            return (
                <div className="min-h-screen pb-20 md:pb-0 md:pl-64">
                    {/* Mobile Header */}
                    <header className="bg-slate-900 border-b border-slate-700 p-4 sticky top-0 z-50 md:hidden flex items-center justify-between">
                        <div className="flex items-center space-x-2">
                            <span className="text-emerald-500 font-bold text-xl tracking-tighter">TCCC</span>
                            <span className="text-sm text-slate-400">戰術戰傷救護</span>
                        </div>
                    </header>

                    {/* Desktop Sidebar / Mobile Bottom Nav */}
                    <nav className="fixed bottom-0 w-full md:w-64 md:h-screen md:top-0 md:left-0 bg-slate-800 border-t md:border-t-0 md:border-r border-slate-700 z-50 flex md:flex-col justify-around md:justify-start md:p-4">
                        <div className="hidden md:flex items-center space-x-2 mb-8 px-2">
                            <div className="w-8 h-8 bg-emerald-600 rounded flex items-center justify-center font-bold text-white">✚</div>
                            <div>
                                <h1 className="text-xl font-bold text-emerald-400">TCCC</h1>
                                <p className="text-xs text-slate-400">數位教戰手冊</p>
                            </div>
                        </div>
                        
                        {tabs.map(tab => (
                            <button
                                key={tab.id}
                                onClick={() => setActiveTab(tab.id)}
                                className={`flex flex-col md:flex-row items-center md:space-x-3 p-3 md:px-4 md:py-3 rounded-lg transition-all ${
                                    activeTab === tab.id 
                                    ? 'text-emerald-400 bg-slate-700 md:bg-emerald-500/10' 
                                    : 'text-slate-400 hover:text-slate-200'
                                }`}
                            >
                                <Icon name={tab.icon} className="w-6 h-6 mb-1 md:mb-0" />
                                <span className="text-xs md:text-sm font-medium">{tab.label}</span>
                            </button>
                        ))}
                    </nav>

                    {/* Main Content Area */}
                    <main className="p-4 md:p-8 max-w-4xl mx-auto">
                        {activeTab === 'CUF' && <PhaseCUF />}
                        {activeTab === 'TFC' && <PhaseTFC />}
                        {activeTab === 'EVAC' && <PhaseEVAC />}
                        {activeTab === 'TOOLS' && <ToolsSection />}
                    </main>
                </div>
            );
        };

        // --- Phase 1: Care Under Fire ---
        const PhaseCUF = () => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="bg-red-900/30 border border-red-700/50 p-4 rounded-lg">
                        <h2 className="text-2xl font-bold text-red-400 flex items-center gap-2">
                            <Icon name="flame" className="w-6 h-6" /> 
                            Care Under Fire (CUF) 敵火下作業
                        </h2>
                        <p className="text-red-200 mt-2 text-sm">目標：壓制敵火、自救互救、快速脫離。</p>
                        <div className="mt-2 text-xs bg-red-950/50 p-2 rounded inline-block text-red-300 border border-red-800">
                            ⏱ 限時 15 分鐘
                        </div>
                    </div>

                    {/* Report Script */}
                    <div className="glass-panel p-5 rounded-xl border-l-4 border-emerald-500">
                        <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                            <Icon name="radio" className="w-5 h-5 text-emerald-400" />
                            自救互救報告詞
                        </h3>
                        <div className="bg-slate-950 p-4 rounded font-mono text-sm text-emerald-300">
                            「報告！目前位置位於[3D地形位置]，前方發現[敵人]，我軍裝備無損！」
                        </div>
                    </div>

                    {/* 3 Questions Checklist */}
                    <div className="space-y-3">
                        <h3 className="font-bold text-slate-300 text-lg">三句自救互救問話</h3>
                        <CheckItem text="1. 你可以自行上止血帶嗎？" />
                        <CheckItem text="2. 你可以自行退到掩蔽物後方嗎？" />
                        <CheckItem text="3. 你可以自行火力反擊嗎？" />
                    </div>

                    {/* Action */}
                    <div className="bg-slate-800 p-4 rounded-lg border border-slate-600">
                        <h3 className="font-bold text-white mb-2">處置重點</h3>
                        <ul className="list-disc list-inside space-y-2 text-slate-300">
                            <li><strong className="text-red-400">大出血上止血帶</strong>：務必寫上時間 (Time)。</li>
                            <li><strong className="text-yellow-400">撤離</strong>：將傷患移至相對安全區 (掩體後)。</li>
                        </ul>
                    </div>
                </div>
            );
        };

        // --- Phase 2: Tactical Field Care ---
        const PhaseTFC = () => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="bg-emerald-900/30 border border-emerald-700/50 p-4 rounded-lg">
                        <h2 className="text-2xl font-bold text-emerald-400 flex items-center gap-2">
                            <Icon name="activity" className="w-6 h-6" /> 
                            Tactical Field Care (TFC)
                        </h2>
                        <p className="text-emerald-200 mt-2 text-sm">傷患收集點救護。重點：MARCH 評估與處置。</p>
                    </div>

                    {/* Initial Steps */}
                    <div className="bg-slate-800 p-4 rounded-lg">
                        <h3 className="text-lg font-bold text-slate-200 mb-2">初步檢查程序</h3>
                        <ol className="list-decimal list-inside space-y-1 text-slate-400">
                            <li>檢查止血帶（有無鬆脫、有無滲血）</li>
                            <li>卸除武裝及通信器材</li>
                            <li>評估意識（清、聲、痛、否）</li>
                            <li className="text-emerald-400 font-bold">「請副手展開擔架及脫除軍靴」</li>
                        </ol>
                    </div>

                    {/* MARCH Protocol Accordion */}
                    <div className="space-y-4">
                        <h3 className="text-xl font-bold text-white border-b border-slate-700 pb-2">MARCH 評估流程</h3>
                        
                        <MarchCard letter="M" title="Massive Hemorrhage 嚴重出血" color="text-red-500" border="border-red-500">
                            <ul className="list-disc list-inside space-y-1 text-slate-300">
                                <li>控制六大出血點及四肢。</li>
                                <li>重點檢查：頸動脈、腋下、鼠蹊部。</li>
                                <li>處置：加壓止血、止血帶、傷口填塞。</li>
                            </ul>
                        </MarchCard>

                        <MarchCard letter="A" title="Airway 呼吸道" color="text-blue-400" border="border-blue-400">
                            <div className="space-y-2 text-slate-300">
                                <p><strong>動作：</strong>卸鋼盔 ➔ 提下顎法 (評估有無鼾音/雜音)。</p>
                                <p><strong>處置：</strong>上鼻咽呼吸道 (NPA)。</p>
                                <div className="bg-slate-900 p-2 rounded text-sm border-l-2 border-yellow-500">
                                    <span className="text-yellow-500 font-bold">注意：</span>需以血水或口水潤滑。
                                </div>
                                <div className="bg-red-950/50 p-2 rounded text-sm text-red-200">
                                    <strong>🚫 禁忌症 (顱底骨折徵兆)：</strong>
                                    <ul className="list-disc list-inside ml-2">
                                        <li>熊貓眼 (Raccoon eyes)</li>
                                        <li>耳漏、鼻漏 (CSF leakage)</li>
                                        <li>蝙蝠耳/戰鬥氏徵象 (Battle's sign - 耳後瘀青)</li>
                                    </ul>
                                </div>
                            </div>
                        </MarchCard>

                        <MarchCard letter="R" title="Respiration 呼吸評估" color="text-cyan-400" border="border-cyan-400">
                            <div className="space-y-2 text-slate-300">
                                <p><strong>動作：</strong>脫上衣「戰鬥背心」 ➔ 以看聽方式檢查胸部起伏是否一致。</p>
                                <p><strong>檢查手法：</strong>虎抓方式檢查胸部（鎖骨到肚臍）。</p>
                                <p><strong>氣胸處置：</strong>胸封、針刺減壓。</p>
                                <p><strong>後續檢查：</strong>骨盆檢查 ➔ 翻身檢查背部 ➔ 上擔架 (預先放好保暖毯)。</p>
                            </div>
                        </MarchCard>

                        <MarchCard letter="C" title="Circulation 循環" color="text-pink-500" border="border-pink-500">
                            <div className="space-y-2 text-slate-300">
                                <p>檢查處置是否鬆脫 (止血帶、胸封、針刺)。</p>
                                <p>檢查脈搏 (橈動脈、頸動脈)。</p>
                                <p>評估休克徵兆：膚色蒼白、體溫濕冷。</p>
                                
                                <div className="mt-4 border-t border-slate-700 pt-3">
                                    <p className="font-bold text-emerald-400 mb-2">📞 9-Line Part 1 (Line 3,4,5)</p>
                                    <RadioScript 
                                        callsign="小雞呼叫老鷹"
                                        content={[
                                            "(3) 現場一名紅色緊急",
                                            "(5) 擔架運送傷患",
                                            "(4) 需要直升機、氧氣鋼瓶(O2)、AED，血漿2000cc及急救裝備"
                                        ]}
                                    />
                                </div>
                            </div>
                        </MarchCard>

                        <MarchCard letter="H" title="Head/Hypothermia 頭部/低體溫" color="text-orange-400" border="border-orange-400">
                            <ul className="list-disc list-inside space-y-1 text-slate-300">
                                <li>檢查頭部有無出血。</li>
                                <li>臉部有無對稱。</li>
                                <li><strong>保暖</strong>：蓋上毛毯 (防止致死三元組：低體溫、酸中毒、凝血異常)。</li>
                            </ul>
                        </MarchCard>
                    </div>

                    <div className="text-center p-4 bg-slate-800 rounded-lg text-slate-400 text-sm">
                         ⬇️ 抬傷患至交接處 ⬇️
                    </div>
                </div>
            );
        };

        // --- Phase 3: TACEVAC / CCP ---
        const PhaseEVAC = () => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <div className="bg-blue-900/30 border border-blue-700/50 p-4 rounded-lg">
                        <h2 className="text-2xl font-bold text-blue-400 flex items-center gap-2">
                            <Icon name="ambulance" className="w-6 h-6" /> 
                            CCP & TACEVAC 後送照護
                        </h2>
                        <p className="text-blue-200 mt-2 text-sm">傷患收集點與傷票填寫。</p>
                    </div>

                    {/* 9-Line Part 2 */}
                    <div className="glass-panel p-4 rounded-lg">
                        <h3 className="font-bold text-white mb-2 flex items-center gap-2">
                            <Icon name="radio" className="w-5 h-5" /> 9-Line Part 2
                        </h3>
                        <RadioScript 
                            callsign="小雞呼叫老鷹，剩下6Line"
                            content={[
                                "(1) 現在位置為衛光營區，坐標12345678",
                                "(2) 無線電頻率99.9 呼號小雞",
                                "(6) 此地地勢平坦無敵情",
                                "(9) 無放生化核污染",
                                "(8) 傷患為中華民國國籍軍人",
                                "請於到達前00分鐘實施通聯",
                                "(7) 我將以紅色反光板做為標示點，請問是否抄收"
                            ]}
                        />
                    </div>

                    {/* PAWS */}
                    <div className="grid grid-cols-2 gap-3">
                        <div className="col-span-2 text-lg font-bold text-white mb-1">PAWS 護理檢查</div>
                        <PawsItem letter="P" text="Pain 疼痛控制" />
                        <PawsItem letter="A" text="Antibiotics 抗生素" />
                        <PawsItem letter="W" text="Wounds 傷口包紮" />
                        <PawsItem letter="S" text="Splinting 骨折固定" />
                    </div>

                    {/* MIST & Ticket */}
                    <div className="bg-slate-800 p-5 rounded-lg border border-slate-600">
                        <h3 className="text-xl font-bold text-white mb-4 flex justify-between items-center">
                            <span>傷票交接 (MIST)</span>
                            <Icon name="file-text" className="w-5 h-5 text-slate-400" />
                        </h3>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <MistItem label="M (Mechanism)" desc="傷情機制" placeholder="槍傷、爆炸傷" />
                            <MistItem label="I (Injury)" desc="受傷部位" placeholder="右大腿出血、右胸氣胸" />
                            <MistItem label="S (Signs)" desc="病徵" placeholder="呼吸急促、膚色蒼白、休克" />
                            <MistItem label="T (Treatment)" desc="治療處置" placeholder="止血帶、胸封、保暖" />
                        </div>

                        <div className="bg-black/40 p-3 rounded border-l-4 border-blue-500">
                            <p className="text-xs text-slate-400 mb-1">無線電範例：</p>
                            <p className="text-sm text-blue-300 font-mono">
                                「目前傷情為槍傷、爆炸傷，右大腿出血、右胸開放性氣胸。病徵呼吸急促、體溫濕冷、膚色蒼白、有休克現象。已做處置：止血帶止血、胸封、建立鼻咽呼吸道、並給予保暖。請問是否抄收。」
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Tools Section (Quiz/Checklist) ---
        const ToolsSection = () => {
            return (
                <div className="space-y-6 animate-fade-in">
                    <h2 className="text-2xl font-bold text-purple-400">輔助學習工具</h2>
                    
                    <div className="bg-slate-800 p-4 rounded-lg">
                        <h3 className="font-bold text-white mb-4">快速記憶口訣卡</h3>
                        <div className="grid gap-4">
                            <div className="p-3 bg-slate-700 rounded border border-slate-600">
                                <div className="font-bold text-emerald-400">意識評估：清、聲、痛、否</div>
                                <div className="text-sm text-slate-400">AVPU (Alert, Verbal, Pain, Unresponsive)</div>
                            </div>
                            <div className="p-3 bg-slate-700 rounded border border-slate-600">
                                <div className="font-bold text-red-400">致死三元組</div>
                                <div className="text-sm text-slate-400">低體溫、酸中毒、凝血功能異常</div>
                            </div>
                            <div className="p-3 bg-slate-700 rounded border border-slate-600">
                                <div className="font-bold text-blue-400">禁忌症口訣</div>
                                <div className="text-sm text-slate-400">熊貓眼、蝙蝠耳、耳漏鼻漏 ➡️ 禁用 NPA</div>
                            </div>
                        </div>
                    </div>
                    
                     <div className="text-center text-xs text-slate-500 mt-10">
                        本網頁僅供教學輔助參考，實際操作請依據最新 TCCC 準則與教官指導為準。
                    </div>
                </div>
            );
        };

        // --- Helper Components ---

        const CheckItem = ({ text }) => {
            const [checked, setChecked] = useState(false);
            return (
                <div 
                    onClick={() => setChecked(!checked)}
                    className={`flex items-center p-3 rounded cursor-pointer transition-colors ${
                        checked ? 'bg-emerald-900/40 border border-emerald-700' : 'bg-slate-800 border border-slate-700 hover:bg-slate-750'
                    }`}
                >
                    <div className={`w-6 h-6 rounded-full flex items-center justify-center mr-3 border ${
                        checked ? 'bg-emerald-500 border-emerald-500 text-white' : 'border-slate-500 text-transparent'
                    }`}>
                        ✓
                    </div>
                    <span className={checked ? 'text-emerald-100 line-through decoration-emerald-500/50' : 'text-slate-300'}>
                        {text}
                    </span>
                </div>
            );
        };

        const MarchCard = ({ letter, title, color, border, children }) => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className={`bg-slate-800 rounded-lg border-l-4 overflow-hidden transition-all ${border}`}>
                    <button 
                        onClick={() => setIsOpen(!isOpen)}
                        className="w-full flex items-center justify-between p-4 text-left hover:bg-slate-750"
                    >
                        <div className="flex items-center gap-4">
                            <span className={`text-3xl font-black ${color} font-mono w-8`}>{letter}</span>
                            <span className="font-bold text-slate-200">{title}</span>
                        </div>
                        <Icon name={isOpen ? "chevron-up" : "chevron-down"} className="text-slate-500" />
                    </button>
                    {isOpen && (
                        <div className="p-4 pt-0 border-t border-slate-700/50 bg-slate-800/50">
                            <div className="mt-3">
                                {children}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const RadioScript = ({ callsign, content }) => (
            <div className="font-mono bg-black p-4 rounded-md border border-slate-700 relative overflow-hidden group">
                <div className="absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20">
                   <Icon name="radio" className="w-16 h-16 text-emerald-500" />
                </div>
                <div className="text-emerald-500 font-bold mb-2 border-b border-emerald-900 pb-1">
                    {callsign}，聽到請回答：
                </div>
                <div className="space-y-1 text-emerald-100/90 text-sm">
                    {content.map((line, idx) => (
                        <div key={idx}>{line}</div>
                    ))}
                </div>
                <div className="mt-2 text-emerald-700 text-xs text-right">OVER</div>
            </div>
        );

        const PawsItem = ({ letter, text }) => (
            <div className="bg-slate-700 p-3 rounded flex items-center gap-3 border border-slate-600">
                <div className="font-black text-xl text-yellow-400 w-6">{letter}</div>
                <div className="text-sm font-medium text-slate-200">{text}</div>
            </div>
        );

        const MistItem = ({ label, desc, placeholder }) => (
            <div className="bg-slate-900 p-3 rounded border border-slate-700">
                <div className="flex justify-between items-baseline mb-1">
                    <span className="font-bold text-blue-400">{label}</span>
                    <span className="text-xs text-slate-500">{desc}</span>
                </div>
                <div className="text-sm text-slate-300">{placeholder}</div>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

